{"version":3,"file":"fortune.js","sources":["pages/fortune/fortune.vue","pages/fortune/fortune.vue?type=page"],"sourcesContent":["<template>\n    <view class=\"container\">\n        <view class=\"form-item\">\n            <text class=\"label\">选择日期（默认今日）</text>\n            <picker\n                mode=\"date\"\n                :value=\"date\"\n                @change=\"onDateChange\"\n            >\n                <view class=\"picker\">\n                    <text :class=\"{ placeholder: !date }\">\n                        {{ date || '请选择日期' }}\n                    </text>\n                </view>\n            </picker>\n        </view>\n\n        <button class=\"generate-btn\" :disabled=\"loading\" @click=\"generate\">\n            {{ loading ? '生成中...' : '生成今日运势卡片' }}\n        </button>\n\n        <!-- Banner广告 -->\n        <ad-video-banner />\n    </view>\n</template>\n\n<script>\nimport api from '@/common/utils/api.js';\nimport AdVideoBanner from '@/common/components/ad-video-banner.vue';\n\nexport default {\n    components: {\n        AdVideoBanner\n    },\n    data() {\n        return {\n            date: '',\n            loading: false,\n            fortune: null\n        };\n    },\n    onLoad() {\n        const d = new Date();\n        const y = d.getFullYear();\n        const m = d.getMonth() + 1;\n        const day = d.getDate();\n        // 万年历接口支持 yyyy-M-d 或 yyyy-MM-dd，这里统一用 yyyy-M-d\n        this.date = `${y}-${m}-${day}`;\n    },\n    methods: {\n        onDateChange(e) {\n            this.date = e.detail.value;\n        },\n        async generate() {\n            if (!this.date) {\n                uni.showToast({\n                    title: '请选择日期',\n                    icon: 'none'\n                });\n                return;\n            }\n\n            this.loading = true;\n            try {\n                const res = await api.generateFortune({\n                    date: this.date\n                });\n                if (res.code === 200) {\n                    const url = res.data && res.data.resultUrl;\n                    if (url) {\n                        uni.navigateTo({\n                            url: `/pages/result/result?type=4&resultUrl=${encodeURIComponent(url)}`\n                        });\n                    } else {\n                        uni.showToast({\n                            title: '生成失败，请稍后重试',\n                            icon: 'none'\n                        });\n                    }\n                } else {\n                    uni.showToast({\n                        title: res.message || '查询失败',\n                        icon: 'none'\n                    });\n                }\n            } catch (e) {\n                console.error('查询失败', e);\n                uni.showToast({\n                    title: '查询失败，请稍后重试',\n                    icon: 'none'\n                });\n            } finally {\n                this.loading = false;\n            }\n        }\n    }\n};\n</script>\n\n<style scoped>\n.container {\n    min-height: 100vh;\n    background: #f5f5f5;\n    padding: 30rpx;\n}\n\n.form-item {\n    background: #fff;\n    border-radius: 20rpx;\n    padding: 30rpx;\n    margin-bottom: 30rpx;\n}\n\n.label {\n    display: block;\n    font-size: 28rpx;\n    color: #333;\n    margin-bottom: 20rpx;\n    font-weight: 500;\n}\n\n.input {\n    width: 100%;\n    height: 80rpx;\n    background: #f5f5f5;\n    border-radius: 10rpx;\n    padding: 0 20rpx;\n    font-size: 28rpx;\n    box-sizing: border-box;\n}\n\n.picker {\n    width: 100%;\n    height: 80rpx;\n    background: #f5f5f5;\n    border-radius: 10rpx;\n    padding: 0 20rpx;\n    display: flex;\n    align-items: center;\n    box-sizing: border-box;\n}\n\n.picker text {\n    font-size: 28rpx;\n    color: #333;\n}\n\n.picker text.placeholder {\n    color: #999;\n}\n\n.generate-btn {\n    width: 100%;\n    height: 88rpx;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: #fff;\n    border-radius: 44rpx;\n    font-size: 32rpx;\n    border: none;\n    margin-top: 40rpx;\n}\n\n.generate-btn[disabled] {\n    background: #ccc;\n}\n</style>\n\n\n\n\n","import MiniProgramPage from '/Users/gongxuesong/Work/individual/工具/tool-ai-all/tool-ai-uniapp/pages/fortune/fortune.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","api"],"mappings":";;;AA4BA,MAAO,gBAAe,MAAW;AAEjC,MAAK,YAAU;AAAA,EACX,YAAY;AAAA,IACR;AAAA,EACH;AAAA,EACD,OAAO;AACH,WAAO;AAAA,MACH,MAAM;AAAA,MACN,SAAS;AAAA,MACT,SAAS;AAAA;EAEhB;AAAA,EACD,SAAS;AACL,UAAM,IAAI,oBAAI;AACd,UAAM,IAAI,EAAE;AACZ,UAAM,IAAI,EAAE,SAAQ,IAAK;AACzB,UAAM,MAAM,EAAE;AAEd,SAAK,OAAO,GAAG,CAAC,IAAI,CAAC,IAAI,GAAG;AAAA,EAC/B;AAAA,EACD,SAAS;AAAA,IACL,aAAa,GAAG;AACZ,WAAK,OAAO,EAAE,OAAO;AAAA,IACxB;AAAA,IACD,MAAM,WAAW;AACb,UAAI,CAAC,KAAK,MAAM;AACZA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AACD;AAAA,MACJ;AAEA,WAAK,UAAU;AACf,UAAI;AACA,cAAM,MAAM,MAAMC,iBAAG,IAAC,gBAAgB;AAAA,UAClC,MAAM,KAAK;AAAA,QACf,CAAC;AACD,YAAI,IAAI,SAAS,KAAK;AAClB,gBAAM,MAAM,IAAI,QAAQ,IAAI,KAAK;AACjC,cAAI,KAAK;AACLD,0BAAAA,MAAI,WAAW;AAAA,cACX,KAAK,yCAAyC,mBAAmB,GAAG,CAAC;AAAA,YACzE,CAAC;AAAA,iBACE;AACHA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAO;AAAA,cACP,MAAM;AAAA,YACV,CAAC;AAAA,UACL;AAAA,eACG;AACHA,wBAAAA,MAAI,UAAU;AAAA,YACV,OAAO,IAAI,WAAW;AAAA,YACtB,MAAM;AAAA,UACV,CAAC;AAAA,QACL;AAAA,MACJ,SAAS,GAAG;AACRA,sBAAA,MAAA,MAAA,SAAA,mCAAc,QAAQ,CAAC;AACvBA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AAAA,MACL,UAAU;AACN,aAAK,UAAU;AAAA,MACnB;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;AC/FA,GAAG,WAAW,eAAe;"}