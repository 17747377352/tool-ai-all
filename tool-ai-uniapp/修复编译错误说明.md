# 修复编译错误说明

## 问题

编译时出现错误：
```
app.json: requiredPrivateInfos[0] 字段需为 chooseAddress,chooseLocation,choosePoi,getFuzzyLocation,getLocation,onLocationChange,startLocationUpdate,startLocationUpdateBackground
```

## 原因

在 `manifest.json` 中配置了 `requiredPrivateInfos: ["getUserInfo"]`，但：
1. `getUserInfo` 不在微信小程序允许的 `requiredPrivateInfos` 值列表中
2. `getUserInfo` API 在新版微信小程序中已经废弃，不再需要声明

## 解决方案

已删除 `requiredPrivateInfos` 字段，因为：
- 项目不需要位置相关的隐私接口
- `getUserInfo` 已废弃，使用 `getUserProfile` 或静默登录即可

## 修改内容

**修改前：**
```json
"permission": {
    "scope.userLocation": {
        "desc": "你的位置信息将用于小程序位置接口的效果展示"
    }
},
"requiredPrivateInfos": [
    "getUserInfo"
],
```

**修改后：**
```json
// 已删除 requiredPrivateInfos 和 permission 字段
```

## 关于用户信息获取

新版微信小程序获取用户信息的方式：

1. **静默登录**（已实现）
   - 使用 `wx.login()` 获取 code
   - 后端通过 code 换取 openid
   - 不需要用户授权

2. **获取用户信息**（可选）
   - 使用 `wx.getUserProfile()` 获取用户昵称和头像
   - 需要用户主动点击按钮触发
   - 不需要在 manifest.json 中声明

## 现在可以正常编译了

删除 `requiredPrivateInfos` 后，项目应该可以正常编译运行。

如果还有其他编译错误，请查看控制台的详细错误信息。




